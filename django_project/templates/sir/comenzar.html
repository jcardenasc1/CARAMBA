{% extends "base2.html" %}
{% block extrastatic %}
    <link href="{{STATIC_URL}}css/ejercicio/style.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/ejercicio/normalize.css" />
    <link href="{{STATIC_URL}}css/animate.min.css" rel="stylesheet">
{% endblock %}
{% block contenido %}
<div class="col-lg-8">

                <!-- Blog Post -->
                <!-- Author -->
                <p class="lead">
                    <a href="#"><b>Ejercicio <span id="id_ejercicio">{{ejercicio.id}}</span>:</b> <i><span id="name_ejercicio">{{ejercicio.name}}</span></i></a>
                </p>
                <!-- Date/Time -->
                <p><i class="fa fa-clock-o" aria-hidden="true"></i> Publicado el <span id="creado"> {{ejercicio.created}}</span> por <span id="publicado">{{ejercicio.user.first_name}} {{ejercicio.user.last_name}}</span></p>
                <hr>
                <!-- Preview Image -->
                 <p class="lead" id="ejercicio">{{ejercicio.description}} </p>
                <!--<p>Elige un avatar y mediante los controles, has que realize 5 pasos consecutivos hacia la izquierda hasta llegar a la meta</p>-->

              <button style="background:#f39c12; color:white" id="btn-comenzar" onclick="abrir()">Comenzar</button>

                <hr>
                <!-- Post Content -->

    	 <form role="form" method="POST" enctype="multipart/form-data">{% csrf_token %}

             <!--<div class="form-group">-->
                            <!--{% if form.file.errors %}-->
                                <!--<div class="alert alert-danger alert-dismissible fade in" role="alert">-->
                                    <!--<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>-->
                                    <!--<ul class="errorlist"><li>Elija un archivo <ul class="errorlist"></ul></li></ul>-->
                                <!--</div>-->
                             <!--{% endif %}-->
                            <!--<label for="exampleInputEmail1">{{ form.file.label_tag }}</label>-->
                            <!--<div class="input-group">-->
                                <!--<span class="input-group-addon"><i class="fa fa-file"></i></span></span>-->
                                <!--{{ form.file }}-->
                            <!--</div>-->
                        <!--</div>-->

                <div class="form-group">
                    {{form.exercise}}
                    {{form.duration}}
                    <div id="wrapper">
                    {% if form.like.errors %}
                                <div class="alert alert-danger alert-dismissible fade in" role="alert">
                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                                    <ul class="errorlist"><li>Califique el gusto <ul class="errorlist"></ul></li></ul>
                                </div>
                     {% endif %}
                    <h3 class="clasificacion"> <input id="radio1" type="radio" name="like" value="5"><label for="radio1">&#9733;</label><input id="radio2" type="radio" name="like" value="4"><label for="radio2">&#9733;</label><input id="radio3" type="radio" name="like" value="3"><label for="radio3">&#9733;</label><input id="radio4" type="radio" name="like" value="2"><label for="radio4">&#9733;</label><input id="radio5" type="radio" name="like" value="1"><label for="radio5">&#9733;</label>
                    : Gusto </h3>
                    {% if form.like.errors %}
                                <div class="alert alert-danger alert-dismissible fade in" role="alert">
                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                                    <ul class="errorlist"><li>Califique la dificultad<ul class="errorlist"></ul></li></ul>
                                </div>
                     {% endif %}
                        <h3 class="clasificacion1">
                    <input id="radio6" type="radio" name="difficulty" value="5"><label for="radio6">&#9733;</label><input id="radio7" type="radio" name="difficulty" value="4"><label for="radio7">&#9733;</label><input id="radio8" type="radio" name="difficulty" value="3"><label for="radio8">&#9733;</label><input id="radio9" type="radio" name="difficulty" value="2"><label for="radio9">&#9733;</label><input id="radio10" type="radio" name="difficulty" value="1"><label for="radio10">&#9733;</label>
                    : Dificultad</h3>
                    </div>

                <div id="subir">
                    {% if form.file.errors %}
                                <div class="alert alert-danger alert-dismissible fade in" role="alert">
                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                                    <ul class="errorlist"><li>extension del archivo no permitido <ul class="errorlist"></ul></li></ul>
                                </div>
                    {% endif %}
                    {{form.file}}
                   </div>
                </div>
                   <div style="text-align:center;">
                <button type="submit" style="background:#007fff" class="btn btn-primary">Valorar</button>
                <a class="btn btn-default link-back" >Cancelar</a>
                </div>
         </form>

				</div>
<div class="col-md-4">
                <!-- Blog Search Well -->
                <div class="well">
                    <h4>CRONÓMETRO</h4>
                    <div class="input-group">
                        <div id="timer">
            <div class="container">
                <div id="hour">00</div>
                <div class="divider">:</div>
                <div id="minute">00</div>
                <div class="divider">:</div>
                <div id="second">00</div>
            </div>
        </div>
                        </button>
                        </span>
                    </div>
                    <!-- /.input-group -->
                </div>

                <!-- Blog Categories Well -->
                <div class="well">
                    <h4>EJERCICIOS</h4>
                    <div class="row">
                       <div id="tabs" style="overflow: auto;height: 200px">
						  <ul>
							<li><a href="#tabs-1">Recomendados</a></li>
							<li><a href="#tabs-2">Todos</a></li>

						  </ul>
						  <div id="tabs-1">
							<table class="table table-condensed">
								<tbody>
								  <tr><td class="none" onMouseOver="this.className='resaltar'" onMouseOut="this.className='none'"><a href="" style="width:100%;height:100%;display:block;">Ejercicio #1 Movimiento Básico</a></td> </tr>
								  <tr><td class="none" onMouseOver="this.className='resaltar'" onMouseOut="this.className='none'"><a href="" style="width:100%;height:100%;display:block;">Ejercicio #20 Condicional Experto <b>★ nuevo</b></a></td> </tr>
								  <tr><td class="none" onMouseOver="this.className='resaltar'" onMouseOut="this.className='none'"><a href="" style="width:100%;height:100%;display:block;">Ejercicio #12 Movimiento Giro 180°</a></td> </tr>
								</tbody>
							  </table>
						  </div>
						  <div id="tabs-2">
							<table class="table table-condensed">
								<tbody>
								<tr><td class="none" onMouseOver="this.className='resaltar'" onMouseOut="this.className='none'"><a href="" style="width:100%;height:100%;display:block;">Ejercicio #1 Movimiento Básico</a></td> </tr>
								  <tr><td class="none" onMouseOver="this.className='resaltar'" onMouseOut="this.className='none'"><a href="" style="width:100%;height:100%;display:block;">Ejercicio #2 Condicional Básico</a></td> </tr>
								  <tr><td class="none" onMouseOver="this.className='resaltar'" onMouseOut="this.className='none'"><a href="" style="width:100%;height:100%;display:block;">Ejercicio #2 Movimiento Giro°</a></td> </tr>

								</tbody>
							  </table>
						  </div>

						</div>
                    </div>
                    <!-- /.row -->
                </div>

                <!-- Side Widget Well -->


            </div>

{% endblock %}


{% block js %}
    <script src="{{STATIC_URL}}js/ejercicio/custom-file-input.js"></script>
    <script src="{{STATIC_URL}}js/jquery-ui.js"></script>
    <script src="{{STATIC_URL}}js/js/jquery-ui.min.js"></script>
    <script>
  $( function() {
    $( "#tabs" ).tabs();
  } );
  </script>
    <script>

$(document).ready(function(){

    var tiempo = {
        hora: 0,
        minuto: 0,
        segundo: 0
    };

    var tiempo_corriendo = null;

    $("#btn-comenzar").click(function(){
        if ( $(this).text() == 'Comenzar' )
        {
            $(this).text('Detener');
            tiempo_corriendo = setInterval(function(){
                // Segundos
                tiempo.segundo++;
                if(tiempo.segundo >= 60)
                {
                    tiempo.segundo = 0;
                    tiempo.minuto++;
                }

                // Minutos
                if(tiempo.minuto >= 60)
                {
                    tiempo.minuto = 0;
                    tiempo.hora++;
                }

                $("#hour").text(tiempo.hora < 10 ? '0' + tiempo.hora : tiempo.hora);
                $("#minute").text(tiempo.minuto < 10 ? '0' + tiempo.minuto : tiempo.minuto);
                $("#second").text(tiempo.segundo < 10 ? '0' + tiempo.segundo : tiempo.segundo);
                $("#id_duration").val(document.getElementById("hour").textContent+":"+document.getElementById("minute").textContent+":"+document.getElementById("second").textContent);

            }, 1000);
        }
        else
        {
            $(this).text('Comenzar');
            clearInterval(tiempo_corriendo);
        }
        $('#ejercicio').show();
        $("#btn-comenzar").hide();
        $('#cronometro').addClass('animated pulse infinite');
    })
})
        </script>
    <script type="text/javascript" src="{{STATIC_URL}}js/ejercicio/jquery.canvasjs.min.js"></script>
    <script type="text/javascript">
window.onload = function () {
    var Abstraccion=0;
    var Paralelismo=0;
    var Logica=0;
    var Sincronizacion=0;
    var Control=0;
    var Interaccion=0;
    var Representacion=0;


//Better to construct options first and then pass it as a parameter
//    $.ajax({
//        url: '/nivelAcademico/',
//        type: 'get',
//        success: function(context) {
//            for (i=0; i < context.length ;i++){
//                    Abstraccion=context[i].abstraction;
//                    Paralelismo=context[i].parallelization;
//                    Logica=context[i].logic;
//                    Sincronizacion=context[i].synchronization;
//                    Control=context[i].flowControl;
//                    Interaccion=context[i].userInteractivity;
//                    Representacion=context[i].dataRepresentation;
//            }
//
//
//            var options = {
//            title: {
//                text: "Nivel Academico"
//            },
//                    animationEnabled: true,
//
//                data: [
//            {
//                type: "column", //change it to line, area, bar, pie, etc
//                dataPoints: [
//                    { label: "Paralelismo", y: Paralelismo },
//                    { label: "Logica", y: Logica },
//                    { label: "Abstraccion", y: Abstraccion },
//                    { label: "Interaccion", y: Interaccion },
//                    { label: "Control", y: Control },
//                    { label: "Representacion", y: Representacion },
//                    { label: "Sincronizacion", y: Sincronizacion }
//                ]
//            }
//            ]
//        };
//        $("#chartContainer").CanvasJSChart(options);
//        $("#ejercicio").hide();
//        }
//    });



//	var options = {
//		title: {
//			text: "Nivel Academico"
//		},
//                animationEnabled: true,
//		data: [
//		{
//			type: "column", //change it to line, area, bar, pie, etc
//
//            dataPoints: [
//				{ label: "Paralelismo", y: 0 },
//				{ label: "Logica", y: 0 },
//				{ label: "Abstraccion", y: 0 },
//				{ label: "Interaccion", y: 0 },
//				{ label: "Control", y: 0 },
//				{ label: "Representacion", y: 0 },
//				{ label: "Sincronizacion", y: 0 }
//			]
//		}
//		]
//	};
//
//	$("#chartContainer").CanvasJSChart(options);
//    $("#ejercicio").hide();
    $("#exercise").val({{ejercicio.id}})


}
</script>
    <script>
    function abrir() {
        w=800;
        h=600;
        if (window.screen) {
        w = window.screen.availWidth;
        h = window.screen.availHeight;
        h= (h*90)/100;
        w= (w*75)/100;
        w1= (w*24)/100;
        }
        open('https://scratch.mit.edu/projects/editor/?tip_bar=getStarted','newwin','width='+w+',height='+h+',top=0,left=0');

    }
</script>

    <script>
        $.ajax({
//            data: {'id':info},
            url: '/ejercicio-todos/',
            type: 'get',
            success: function(context) {
                var html = '<table class="table table-condensed"><tbody>';

                    for (i=0; i < context.length ;i++){
                            html = html + '<tr>'+
                                        '<td class="none" >'+
                                '<a href="#" onclick= consulta('+ context[i].id+  ') style="width:100%;height:100%;display:block;">Ejercicio #'+context[i].id +" "+ context[i].nombre +'</a>'+
                                '</td>'+
                                '</tr>'
                    }
                        html=html +'</tbody> </table>';
                    $('#tabs-2').html(html)
                }
        });
    </script>
    <script>
        $.ajax({
//            data: {'id':info},
            url: '/recomendacion/',
            type: 'get',
            success: function(context) {
                var html = '<table class="table table-condensed"><tbody>';
                    if (context.length==0){

                        $('#tabs-1').html('Debe realizar al menos 1 ejercicio para poder recomendarle')
                    }else {
                        for (i = 0; i < context.length; i++) {
                            html = html + '<tr>' +
                                    '<td class="none" >' +
                                    '<a href="#" onclick= consulta(' + context[i].id + ') style="width:100%;height:100%;display:block;">Ejercicio #' + context[i].id + " " + context[i].nombre + '</a>' +
                                    '</td>' +
                                    '</tr>'
                        }
                        html = html + '</tbody> </table>';
                        $('#tabs-1').html(html)
                    }
                }
        });
    </script>

    <script>
        function consulta(id){
            var ejercicio_id=id;
            $.ajax({
                data: {'id':ejercicio_id},
                url: '/consultar-ejercicio/',
                type: 'get',
                success: function(context) {
                    for (i=0; i < context.length ;i++){
                        $('#creado').html(context[i].creado);
                        $('#publicado').html(context[i].usuario);
                        $('#id_ejercicio').html(context[i].id);
                        $('#name_ejercicio').html(context[i].nombre);
                        $('#ejercicio').html(context[i].descripcion);
                        $('#exercise').val(context[i].id);
                    }

                }
            });
        }
    </script>
<script>
    $('#ejercicio').html($('#ejercicio').text())
</script>
{% endblock %}